# å‰åç«¯å¯¹æ¥æ–‡æ¡£

## âš ï¸ å†²çªè¯´æ˜

**æœ¬æ–‡æ¡£ä¸åŸå§‹éœ€æ±‚æ–‡æ¡£å­˜åœ¨ä»¥ä¸‹å†²çªï¼Œå·²ç”¨ `âš ï¸` æ ‡æ³¨ï¼š**

### 1. å­—æ®µå‘½åå†²çª
| æ¨¡å— | åŸæ–‡æ¡£å­—æ®µ | å®ç°å­—æ®µ | å½±å“èŒƒå›´ |
|------|-----------|---------|---------|
| ç”¨æˆ·æ¨¡å— | `id` | `userId` | ç™»å½•ã€è·å–ç”¨æˆ·ä¿¡æ¯ |
| å•†å“æ¨¡å— | `id` | `productId` | å•†å“åˆ—è¡¨ã€å•†å“è¯¦æƒ… |
| åˆ†ç±»æ¨¡å— | `id` | `categoryId` | åˆ†ç±»åˆ—è¡¨ |
| è´­ç‰©è½¦æ¨¡å— | `id` | `cartId` | è´­ç‰©è½¦åˆ—è¡¨ |
| è®¢å•æ¨¡å— | `id` | `orderId` | è®¢å•åˆ—è¡¨ã€è®¢å•è¯¦æƒ… |
| è®¢å•æ¨¡å— | `items` | `products` | è®¢å•åˆ—è¡¨ã€è®¢å•è¯¦æƒ… |
| åœ°å€æ¨¡å— | `id` | `addressId` | åœ°å€åˆ—è¡¨ |

### 2. è®¢å•çŠ¶æ€å€¼å®šä¹‰å†²çª
- **åŸæ–‡æ¡£**ï¼š0-å…¨éƒ¨ï¼Œ1-å¾…ä»˜æ¬¾ï¼Œ2-å¾…å‘è´§ï¼Œ3-å¾…æ”¶è´§ï¼Œ4-å·²å®Œæˆ
- **å®ç°**ï¼š0-å¾…ä»˜æ¬¾ï¼Œ1-å¾…å‘è´§ï¼Œ2-å¾…æ”¶è´§ï¼Œ3-å·²å®Œæˆï¼Œ4-å·²å–æ¶ˆ

### 3. æ–°å¢å­—æ®µ
- å•†å“åˆ—è¡¨/è¯¦æƒ…ï¼šæ–°å¢ `status`ã€`views`ã€`totalPages` å­—æ®µ
- åˆ†ç±»åˆ—è¡¨ï¼šæ–°å¢ `sort` å­—æ®µ

### 4. ç¼ºå¤±å­—æ®µ
- åˆ†ç±»åˆ—è¡¨ï¼šç¼ºå°‘ `parentId`ã€`children` å­—æ®µï¼ˆä¸æ”¯æŒå¤šçº§åˆ†ç±»ï¼‰
- é¦–é¡µ bannerï¼šç¼ºå°‘ `title` å­—æ®µ

### 5. ç»“æ„å·®å¼‚
- è®¢å•åˆ—è¡¨ï¼šå®ç°ä¸­åŒ…å«å®Œæ•´åœ°å€ä¿¡æ¯ï¼ŒåŸæ–‡æ¡£ä¸­ä¸åŒ…å«

**å»ºè®®**ï¼šå‰ç«¯å¼€å‘æ—¶ä»¥æœ¬æ–‡æ¡£ï¼ˆå®ç°æ–‡æ¡£ï¼‰ä¸ºå‡†ï¼Œæ‰€æœ‰å†²çªå·²åœ¨ä¸‹æ–¹è¯¦ç»†æ¥å£ä¸­æ ‡æ³¨ã€‚

---

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£ç”¨äºå‰åç«¯å¼€å‘å¯¹æ¥ï¼ŒåŒ…å«å®Œæ•´çš„ API æ¥å£è¯´æ˜ã€æ•°æ®ç»“æ„ã€è®¤è¯æ–¹å¼ã€é”™è¯¯å¤„ç†ç­‰ä¿¡æ¯ã€‚

**åç«¯é¡¹ç›®ä¿¡æ¯**ï¼š
- æŠ€æœ¯æ ˆï¼šNode.js + Express + MongoDB
- éƒ¨ç½²åœ°å€ï¼š`https://lyaftwgtwyqr.sealosbja.site`
- æœ¬åœ°å¼€å‘ï¼š`http://localhost:3000`

---

## ğŸ”§ æŠ€æœ¯è§„èŒƒ

### 1. æ¥å£åè®®
- åè®®ï¼šHTTP/HTTPS
- æ•°æ®æ ¼å¼ï¼šJSON
- å­—ç¬¦ç¼–ç ï¼šUTF-8
- API é£æ ¼ï¼šRESTful

### 2. è¯·æ±‚å¤´è§„èŒƒ

#### å…¬å…±è¯·æ±‚å¤´
```http
Content-Type: application/json
```

#### éœ€è¦è®¤è¯çš„æ¥å£
```http
Content-Type: application/json
Authorization: Bearer <token>
```

### 3. ç»Ÿä¸€å“åº”æ ¼å¼

#### æˆåŠŸå“åº”
```json
{
  "code": 200,
  "message": "success",
  "data": {
    // å…·ä½“ä¸šåŠ¡æ•°æ®
  }
}
```

#### å¤±è´¥å“åº”
```json
{
  "code": 400,
  "message": "é”™è¯¯æè¿°ä¿¡æ¯",
  "data": null
}
```

### 4. çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | è¯·æ±‚æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒï¼Œtoken æ— æ•ˆæˆ–è¿‡æœŸ |
| 403 | æ— æƒé™è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## ğŸ” è®¤è¯æœºåˆ¶

### JWT Token è®¤è¯

1. **è·å– Token**ï¼šç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œåç«¯è¿”å› JWT token
2. **ä½¿ç”¨ Token**ï¼šå‰ç«¯å°† token å­˜å‚¨ï¼ˆlocalStorage/sessionStorageï¼‰ï¼Œåœ¨éœ€è¦è®¤è¯çš„æ¥å£è¯·æ±‚å¤´ä¸­æºå¸¦
3. **Token æ ¼å¼**ï¼š`Authorization: Bearer <token>`
4. **Token æœ‰æ•ˆæœŸ**ï¼š7 å¤©
5. **Token åˆ·æ–°**ï¼štoken è¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•

### å‰ç«¯ç¤ºä¾‹ä»£ç 

```javascript
// axios æ‹¦æˆªå™¨é…ç½®
axios.interceptors.request.use(config => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨å¤„ç† 401
axios.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // æ¸…é™¤ tokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      localStorage.removeItem('token');
      router.push('/login');
    }
    return Promise.reject(error);
  }
);
```

---

## ğŸ“¡ API æ¥å£æ¸…å•

### æ¥å£æ¦‚è§ˆ

| æ¨¡å— | æ¥å£æ•°é‡ | æ˜¯å¦éœ€è¦è®¤è¯ |
|------|---------|-------------|
| ç”¨æˆ·æ¨¡å— | 4 | éƒ¨åˆ†éœ€è¦ |
| å•†å“æ¨¡å— | 3 | ä¸éœ€è¦ |
| åˆ†ç±»æ¨¡å— | 1 | ä¸éœ€è¦ |
| è´­ç‰©è½¦æ¨¡å— | 4 | éœ€è¦ |
| è®¢å•æ¨¡å— | 6 | éœ€è¦ |
| åœ°å€æ¨¡å— | 5 | éœ€è¦ |
| é¦–é¡µæ¨¡å— | 1 | ä¸éœ€è¦ |

---

## 1ï¸âƒ£ ç”¨æˆ·æ¨¡å—

### 1.1 ç”¨æˆ·æ³¨å†Œ

**æ¥å£åœ°å€**ï¼š`POST /user/register`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "username": "testuser",      // å¿…å¡«ï¼Œ3-20å­—ç¬¦
  "password": "123456",        // å¿…å¡«ï¼Œ6-20å­—ç¬¦
  "email": "test@example.com"  // é€‰å¡«ï¼Œé‚®ç®±æ ¼å¼
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1001
  }
}
```

**é”™è¯¯æƒ…å†µ**ï¼š
- `400`ï¼šç”¨æˆ·åå·²å­˜åœ¨
- `400`ï¼šé‚®ç®±å·²è¢«ä½¿ç”¨
- `400`ï¼šå‚æ•°æ ¼å¼é”™è¯¯

---

### 1.2 ç”¨æˆ·ç™»å½•

**æ¥å£åœ°å€**ï¼š`POST /user/login`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "username": "testuser",  // å¿…å¡«
  "password": "123456"     // å¿…å¡«
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userInfo": {
      "userId": 1001,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "userId"
      "username": "testuser",
      "email": "test@example.com",
      "phone": "13800138000",
      "avatar": "https://example.com/avatar.jpg"
    }
  }
}
```

**å‰ç«¯å¤„ç†**ï¼š
```javascript
// ç™»å½•æˆåŠŸåä¿å­˜ token
const { token, userInfo } = response.data.data;
localStorage.setItem('token', token);
localStorage.setItem('userInfo', JSON.stringify(userInfo));
```

---

### 1.3 è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**ï¼š`GET /user/info`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼šæ— 

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": 1001,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "userId"
    "username": "testuser",
    "email": "test@example.com",
    "phone": "13800138000",
    "avatar": "https://example.com/avatar.jpg",
    "createdAt": "2024-01-01T00:00:00.000Z"
  }
}
```

---

### 1.4 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**ï¼š`POST /user/update`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "email": "newemail@example.com",  // é€‰å¡«
  "phone": "13900139000",           // é€‰å¡«
  "avatar": "https://new-avatar.jpg" // é€‰å¡«
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

---

## 2ï¸âƒ£ å•†å“æ¨¡å—

### 2.1 è·å–å•†å“åˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /product/list`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼ˆQueryï¼‰ï¼š
```
page=1              // é¡µç ï¼Œé»˜è®¤1
pageSize=10         // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
categoryId=1        // åˆ†ç±»IDï¼Œé€‰å¡«
sortBy=sales        // æ’åºå­—æ®µï¼šsales(é”€é‡)ã€price(ä»·æ ¼)ã€createdAt(æ—¶é—´)
order=desc          // æ’åºæ–¹å¼ï¼šasc(å‡åº)ã€desc(é™åº)
```

**å®Œæ•´ç¤ºä¾‹**ï¼š
```
GET /product/list?page=1&pageSize=10&categoryId=1&sortBy=sales&order=desc
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "productId": 1001,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "productId"
        "name": "iPhone 15 Pro",
        "price": 7999,
        "originalPrice": 8999,
        "image": "https://example.com/iphone.jpg",
        "description": "æœ€æ–°æ¬¾iPhone",
        "stock": 100,
        "sales": 520,
        "categoryId": 1,
        "status": 1  // âš ï¸ æ–°å¢å­—æ®µï¼šåŸæ–‡æ¡£æ²¡æœ‰æ­¤å­—æ®µ
      }
    ],
    "total": 50,
    "page": 1,
    "pageSize": 10,
    "totalPages": 5  // âš ï¸ æ–°å¢å­—æ®µï¼šåŸæ–‡æ¡£æ²¡æœ‰æ­¤å­—æ®µ
  }
}
```

---

### 2.2 è·å–å•†å“è¯¦æƒ…

**æ¥å£åœ°å€**ï¼š`GET /product/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šå•†å“IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
GET /product/1001
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "productId": 1001,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "productId"
    "name": "iPhone 15 Pro",
    "price": 7999,
    "originalPrice": 8999,
    "image": "https://example.com/iphone.jpg",
    "images": [
      "https://example.com/iphone1.jpg",
      "https://example.com/iphone2.jpg"
    ],
    "description": "æœ€æ–°æ¬¾iPhone",
    "detail": "<p>è¯¦ç»†æè¿°HTMLå†…å®¹</p>",
    "stock": 100,
    "sales": 520,
    "views": 1234,  // âš ï¸ æ–°å¢å­—æ®µï¼šåŸæ–‡æ¡£æ²¡æœ‰æ­¤å­—æ®µ
    "categoryId": 1,
    "specs": [
      { "name": "é¢œè‰²", "value": "æ·±ç©ºé»‘" },
      { "name": "å®¹é‡", "value": "256GB" }
    ],
    "status": 1  // âš ï¸ æ–°å¢å­—æ®µï¼šåŸæ–‡æ¡£æ²¡æœ‰æ­¤å­—æ®µ
  }
}
```

---

### 2.3 æœç´¢å•†å“

**æ¥å£åœ°å€**ï¼š`GET /product/search`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼ˆQueryï¼‰ï¼š
```
keyword=iPhone      // æœç´¢å…³é”®è¯ï¼Œå¿…å¡«
page=1             // é¡µç ï¼Œé»˜è®¤1
pageSize=10        // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
```

**ç¤ºä¾‹**ï¼š
```
GET /product/search?keyword=iPhone&page=1&pageSize=10
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [...],
    "total": 15,
    "page": 1,
    "pageSize": 10
  }
}
```

---

## 3ï¸âƒ£ åˆ†ç±»æ¨¡å—

### 3.1 è·å–åˆ†ç±»åˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /category/list`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼šæ— 

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "categoryId": 1,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "categoryId"
      "name": "æ‰‹æœºæ•°ç ",
      "icon": "https://example.com/icon1.png",
      "sort": 1  // âš ï¸ æ–°å¢å­—æ®µï¼šåŸæ–‡æ¡£æ²¡æœ‰æ­¤å­—æ®µ
      // âš ï¸ ç¼ºå¤±å­—æ®µï¼šåŸæ–‡æ¡£åŒ…å« "parentId" å’Œ "children"ï¼Œå®ç°ä¸­æ²¡æœ‰
    },
    {
      "categoryId": 2,
      "name": "ç”µè„‘åŠå…¬",
      "icon": "https://example.com/icon2.png",
      "sort": 2
    }
  ]
}
```

---

## 4ï¸âƒ£ è´­ç‰©è½¦æ¨¡å—

### 4.1 è·å–è´­ç‰©è½¦åˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /cart/list`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼šæ— 

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "cartId": 1,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£åŒæ—¶ä½¿ç”¨ "id" å’Œ "cartId"ï¼Œå®ç°ç»Ÿä¸€ä½¿ç”¨ "cartId"
      "productId": 1001,
      "productName": "iPhone 15 Pro",
      "productImage": "https://example.com/iphone.jpg",
      "price": 7999,
      "quantity": 2,
      "selected": true,
      "stock": 100
    }
  ]
}
```

---

### 4.2 æ·»åŠ åˆ°è´­ç‰©è½¦

**æ¥å£åœ°å€**ï¼š`POST /cart/add`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "productId": 1001,  // å¿…å¡«
  "quantity": 2       // å¿…å¡«ï¼Œæ•°é‡
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ·»åŠ æˆåŠŸ",
  "data": {
    "cartId": 1
  }
}
```

**ä¸šåŠ¡é€»è¾‘**ï¼š
- å¦‚æœå•†å“å·²åœ¨è´­ç‰©è½¦ï¼Œåˆ™ç´¯åŠ æ•°é‡
- æ£€æŸ¥åº“å­˜æ˜¯å¦å……è¶³

---

### 4.3 æ›´æ–°è´­ç‰©è½¦

**æ¥å£åœ°å€**ï¼š`POST /cart/update`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "cartId": 1,        // å¿…å¡«
  "quantity": 3,      // é€‰å¡«ï¼Œæ›´æ–°æ•°é‡
  "selected": true    // é€‰å¡«ï¼Œæ˜¯å¦é€‰ä¸­
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

---

### 4.4 åˆ é™¤è´­ç‰©è½¦å•†å“

**æ¥å£åœ°å€**ï¼š`DELETE /cart/delete/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šè´­ç‰©è½¦IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
DELETE /cart/delete/1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

## 5ï¸âƒ£ è®¢å•æ¨¡å—

### 5.1 åˆ›å»ºè®¢å•

**æ¥å£åœ°å€**ï¼š`POST /order/create`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "addressId": 1,           // å¿…å¡«ï¼Œæ”¶è´§åœ°å€ID
  "cartIds": [1, 2, 3],     // å¿…å¡«ï¼Œè´­ç‰©è½¦IDæ•°ç»„
  "remark": "è¯·å°½å¿«å‘è´§"     // é€‰å¡«ï¼Œè®¢å•å¤‡æ³¨
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "orderId": 10001,
    "orderNo": "20240101123456789",
    "totalAmount": 15998
  }
}
```

**ä¸šåŠ¡é€»è¾‘**ï¼š
1. éªŒè¯åœ°å€æ˜¯å¦å±äºå½“å‰ç”¨æˆ·
2. éªŒè¯è´­ç‰©è½¦å•†å“æ˜¯å¦å±äºå½“å‰ç”¨æˆ·
3. æ£€æŸ¥å•†å“åº“å­˜
4. è®¡ç®—è®¢å•æ€»é‡‘é¢
5. æ‰£å‡åº“å­˜
6. æ¸…ç©ºå·²ä¸‹å•çš„è´­ç‰©è½¦å•†å“

---

### 5.2 è·å–è®¢å•åˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /order/list`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼ˆQueryï¼‰ï¼š
```
status=0           // âš ï¸ å†²çªï¼šè®¢å•çŠ¶æ€å€¼å®šä¹‰ä¸åŒ
                   // å®ç°ï¼š0-å¾…ä»˜æ¬¾ï¼Œ1-å¾…å‘è´§ï¼Œ2-å¾…æ”¶è´§ï¼Œ3-å·²å®Œæˆï¼Œ4-å·²å–æ¶ˆ
                   // åŸæ–‡æ¡£ï¼š0-å…¨éƒ¨ï¼Œ1-å¾…ä»˜æ¬¾ï¼Œ2-å¾…å‘è´§ï¼Œ3-å¾…æ”¶è´§ï¼Œ4-å·²å®Œæˆ
page=1            // é¡µç ï¼Œé»˜è®¤1
pageSize=10       // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10
```

**ç¤ºä¾‹**ï¼š
```
GET /order/list?status=0&page=1&pageSize=10
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "orderId": 10001,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "orderId"
        "orderNo": "20240101123456789",
        "status": 0,
        "statusText": "å¾…ä»˜æ¬¾",
        "totalAmount": 15998,
        "products": [  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "items"ï¼Œå®ç°ä½¿ç”¨ "products"
          {
            "productId": 1001,
            "productName": "iPhone 15 Pro",
            "productImage": "https://example.com/iphone.jpg",
            "price": 7999,
            "quantity": 2
          }
        ],
        "address": {  // âš ï¸ å·®å¼‚ï¼šåŸæ–‡æ¡£åœ¨åˆ—è¡¨ä¸­ä¸åŒ…å«å®Œæ•´åœ°å€ä¿¡æ¯
          "name": "å¼ ä¸‰",
          "phone": "13800138000",
          "detail": "å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºç§‘æŠ€å›­å—åŒºXXè·¯XXå·"
        },
        "createdAt": "2024-01-01T12:34:56.000Z"
      }
    ],
    "total": 20,
    "page": 1,
    "pageSize": 10
  }
}
```

---

### 5.3 è·å–è®¢å•è¯¦æƒ…

**æ¥å£åœ°å€**ï¼š`GET /order/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šè®¢å•IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
GET /order/10001
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "orderId": 10001,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "orderId"
    "orderNo": "20240101123456789",
    "status": 0,
    "statusText": "å¾…ä»˜æ¬¾",
    "totalAmount": 15998,
    "remark": "è¯·å°½å¿«å‘è´§",
    "products": [...],  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "items"ï¼Œå®ç°ä½¿ç”¨ "products"
    "address": {...},
    "createdAt": "2024-01-01T12:34:56.000Z",
    "paidAt": null,
    "shippedAt": null,
    "completedAt": null
  }
}
```

---

### 5.4 å–æ¶ˆè®¢å•

**æ¥å£åœ°å€**ï¼š`POST /order/cancel/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šè®¢å•IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
POST /order/cancel/10001
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "è®¢å•å·²å–æ¶ˆ",
  "data": null
}
```

**ä¸šåŠ¡é€»è¾‘**ï¼š
- åªæœ‰å¾…ä»˜æ¬¾çŠ¶æ€çš„è®¢å•å¯ä»¥å–æ¶ˆ
- å–æ¶ˆåæ¢å¤å•†å“åº“å­˜

---

### 5.5 ç¡®è®¤æ”¶è´§

**æ¥å£åœ°å€**ï¼š`POST /order/confirm/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šè®¢å•IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
POST /order/confirm/10001
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¡®è®¤æ”¶è´§æˆåŠŸ",
  "data": null
}
```

**ä¸šåŠ¡é€»è¾‘**ï¼š
- åªæœ‰å¾…æ”¶è´§çŠ¶æ€çš„è®¢å•å¯ä»¥ç¡®è®¤æ”¶è´§
- ç¡®è®¤åè®¢å•çŠ¶æ€å˜ä¸ºå·²å®Œæˆ

---

### 5.6 åˆ é™¤è®¢å•

**æ¥å£åœ°å€**ï¼š`DELETE /order/delete/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šè®¢å•IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
DELETE /order/delete/10001
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

**ä¸šåŠ¡é€»è¾‘**ï¼š
- åªæœ‰å·²å®Œæˆæˆ–å·²å–æ¶ˆçš„è®¢å•å¯ä»¥åˆ é™¤

---

## 6ï¸âƒ£ åœ°å€æ¨¡å—

### 6.1 è·å–åœ°å€åˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /address/list`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼šæ— 

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "addressId": 1,  // âš ï¸ å†²çªï¼šåŸæ–‡æ¡£ä½¿ç”¨ "id"ï¼Œå®ç°ä½¿ç”¨ "addressId"
      "name": "å¼ ä¸‰",
      "phone": "13800138000",
      "province": "å¹¿ä¸œçœ",
      "city": "æ·±åœ³å¸‚",
      "district": "å—å±±åŒº",
      "detail": "ç§‘æŠ€å›­å—åŒºXXè·¯XXå·",
      "isDefault": true
    }
  ]
}
```

---

### 6.2 æ·»åŠ åœ°å€

**æ¥å£åœ°å€**ï¼š`POST /address/add`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "name": "å¼ ä¸‰",              // å¿…å¡«
  "phone": "13800138000",     // å¿…å¡«
  "province": "å¹¿ä¸œçœ",        // å¿…å¡«
  "city": "æ·±åœ³å¸‚",           // å¿…å¡«
  "district": "å—å±±åŒº",        // å¿…å¡«
  "detail": "ç§‘æŠ€å›­å—åŒºXXè·¯XXå·", // å¿…å¡«
  "isDefault": true           // é€‰å¡«ï¼Œæ˜¯å¦é»˜è®¤åœ°å€
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ·»åŠ æˆåŠŸ",
  "data": {
    "addressId": 1
  }
}
```

**ä¸šåŠ¡é€»è¾‘**ï¼š
- å¦‚æœè®¾ç½®ä¸ºé»˜è®¤åœ°å€ï¼Œå°†å…¶ä»–åœ°å€çš„ isDefault è®¾ä¸º false

---

### 6.3 æ›´æ–°åœ°å€

**æ¥å£åœ°å€**ï¼š`POST /address/update/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šåœ°å€IDï¼ˆè·¯å¾„å‚æ•°ï¼‰
- Bodyï¼šéœ€è¦æ›´æ–°çš„å­—æ®µï¼ˆåŒæ·»åŠ åœ°å€ï¼‰

**ç¤ºä¾‹**ï¼š
```
POST /address/update/1
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "name": "æå››",
  "phone": "13900139000"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

---

### 6.4 åˆ é™¤åœ°å€

**æ¥å£åœ°å€**ï¼š`DELETE /address/delete/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šåœ°å€IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
DELETE /address/delete/1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

---

### 6.5 è®¾ç½®é»˜è®¤åœ°å€

**æ¥å£åœ°å€**ï¼š`POST /address/setDefault/:id`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šæ˜¯

**è¯·æ±‚å‚æ•°**ï¼š
- `id`ï¼šåœ°å€IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```
POST /address/setDefault/1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "è®¾ç½®æˆåŠŸ",
  "data": null
}
```

---

## 7ï¸âƒ£ é¦–é¡µæ¨¡å—

### 7.1 è·å–é¦–é¡µæ•°æ®

**æ¥å£åœ°å€**ï¼š`GET /home`

**æ˜¯å¦éœ€è¦è®¤è¯**ï¼šå¦

**è¯·æ±‚å‚æ•°**ï¼šæ— 

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "banners": [
      {
        "id": 1,
        "image": "https://example.com/banner1.jpg",
        "link": "/product/1001"
        // âš ï¸ ç¼ºå¤±å­—æ®µï¼šåŸæ–‡æ¡£åŒ…å« "title" å­—æ®µï¼Œå®ç°ä¸­æ²¡æœ‰
      }
    ],
    "categories": [
      {
        "categoryId": 1,
        "name": "æ‰‹æœºæ•°ç ",
        "icon": "https://example.com/icon1.png"
      }
    ],
    "hotProducts": [
      {
        "productId": 1001,
        "name": "iPhone 15 Pro",
        "price": 7999,
        "image": "https://example.com/iphone.jpg",
        "sales": 520
      }
    ],
    "newProducts": [...]
  }
}
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### ä½¿ç”¨ Postman æµ‹è¯•

1. **å¯¼å…¥ Collection**
   - å¯¼å…¥é¡¹ç›®æ ¹ç›®å½•çš„ `postman_collection.json`

2. **é…ç½®ç¯å¢ƒå˜é‡**
   - å˜é‡åï¼š`baseUrl`
   - æœ¬åœ°å¼€å‘å€¼ï¼š`http://localhost:3000`
   - ç”Ÿäº§ç¯å¢ƒå€¼ï¼š`https://lyaftwgtwyqr.sealosbja.site`

3. **æµ‹è¯•æµç¨‹**
   ```
   1. å¥åº·æ£€æŸ¥ â†’ GET /health
   2. ç”¨æˆ·æ³¨å†Œ â†’ POST /user/register
   3. ç”¨æˆ·ç™»å½• â†’ POST /user/loginï¼ˆè·å–tokenï¼‰
   4. å°†tokenä¿å­˜åˆ°ç¯å¢ƒå˜é‡
   5. æµ‹è¯•éœ€è¦è®¤è¯çš„æ¥å£
   ```

### å‰ç«¯ API å°è£…ç¤ºä¾‹

```javascript
// api/user.js
import request from '@/utils/request'

export const userAPI = {
  // ç™»å½•
  login(data) {
    return request.post('/user/login', data)
  },
  
  // æ³¨å†Œ
  register(data) {
    return request.post('/user/register', data)
  },
  
  // è·å–ç”¨æˆ·ä¿¡æ¯
  getUserInfo() {
    return request.get('/user/info')
  },
  
  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  updateUserInfo(data) {
    return request.post('/user/update', data)
  }
}

// api/product.js
export const productAPI = {
  // è·å–å•†å“åˆ—è¡¨
  getProductList(params) {
    return request.get('/product/list', { params })
  },
  
  // è·å–å•†å“è¯¦æƒ…
  getProductDetail(id) {
    return request.get(`/product/${id}`)
  },
  
  // æœç´¢å•†å“
  searchProducts(params) {
    return request.get('/product/search', { params })
  }
}

// api/cart.js
export const cartAPI = {
  // è·å–è´­ç‰©è½¦åˆ—è¡¨
  getCartList() {
    return request.get('/cart/list')
  },
  
  // æ·»åŠ åˆ°è´­ç‰©è½¦
  addToCart(data) {
    return request.post('/cart/add', data)
  },
  
  // æ›´æ–°è´­ç‰©è½¦
  updateCart(data) {
    return request.post('/cart/update', data)
  },
  
  // åˆ é™¤è´­ç‰©è½¦å•†å“
  deleteCart(id) {
    return request.delete(`/cart/delete/${id}`)
  }
}
```

---

## ğŸ” å¸¸è§é—®é¢˜

### 1. è·¨åŸŸé—®é¢˜
åç«¯å·²é…ç½® CORSï¼Œé»˜è®¤å…è®¸ `http://localhost:5173`ã€‚å¦‚æœå‰ç«¯ç«¯å£ä¸åŒï¼Œéœ€è¦ä¿®æ”¹åç«¯ `.env` æ–‡ä»¶ä¸­çš„ `CORS_ORIGIN`ã€‚

### 2. Token è¿‡æœŸå¤„ç†
Token æœ‰æ•ˆæœŸä¸º 7 å¤©ï¼Œè¿‡æœŸåä¼šè¿”å› 401 çŠ¶æ€ç ã€‚å‰ç«¯éœ€è¦ï¼š
- ç›‘å¬ 401 å“åº”
- æ¸…é™¤æœ¬åœ° token
- è·³è½¬åˆ°ç™»å½•é¡µ

### 3. å›¾ç‰‡ä¸Šä¼ 
å½“å‰ç‰ˆæœ¬æš‚æœªå®ç°å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œå›¾ç‰‡å­—æ®µä½¿ç”¨ URL å­—ç¬¦ä¸²ã€‚å¦‚éœ€ä¸Šä¼ åŠŸèƒ½ï¼Œå»ºè®®ï¼š
- ä½¿ç”¨ç¬¬ä¸‰æ–¹äº‘å­˜å‚¨ï¼ˆå¦‚é˜¿é‡Œäº‘ OSSã€ä¸ƒç‰›äº‘ï¼‰
- æˆ–åœ¨åç«¯æ·»åŠ æ–‡ä»¶ä¸Šä¼ æ¥å£

### 4. åˆ†é¡µå‚æ•°
æ‰€æœ‰åˆ—è¡¨æ¥å£éƒ½æ”¯æŒåˆ†é¡µï¼š
- `page`ï¼šé¡µç ï¼Œä» 1 å¼€å§‹
- `pageSize`ï¼šæ¯é¡µæ•°é‡ï¼Œå»ºè®® 10-50
- å“åº”åŒ…å« `total`ï¼ˆæ€»æ•°ï¼‰å’Œ `totalPages`ï¼ˆæ€»é¡µæ•°ï¼‰

### 5. æ•°æ®åº“è¿æ¥
ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
```
mongodb://root:9bpm8zf4@x-db-mongodb.ns-rpjorlyu.svc:27017
```

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦ååŠ©ï¼Œè¯·è”ç³»åç«¯å¼€å‘å›¢é˜Ÿã€‚

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æ›´æ–°æ—¶é—´**ï¼š2024-12-09  
**ç»´æŠ¤è€…**ï¼šåç«¯å¼€å‘å›¢é˜Ÿ
