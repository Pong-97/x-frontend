# åŠ¨æ€è·¯ç”±å®ç°ï¼šç‚¹å‡»ä¸åŒå•†å“ï¼Œè¿›å…¥ä¸åŒè¯¦æƒ…é¡µ

## ğŸ¯ ä½ çš„é¡¹ç›®å®ç°æ–¹å¼

### 1ï¸âƒ£ è·¯ç”±é…ç½®ï¼ˆrouter/index.jsï¼‰

```javascript
{
  path: '/product/:id',    // :id æ˜¯åŠ¨æ€å‚æ•°ï¼Œå¯ä»¥æ˜¯ä»»ä½•å€¼
  name: 'ProductDetail',
  component: () => import('@/views/product/detail.vue'),
  meta: { title: 'å•†å“è¯¦æƒ…' }
}
```

**åŒ¹é…ç¤ºä¾‹ï¼š**
- `/product/1` âœ… åŒ¹é…ï¼Œid=1
- `/product/123` âœ… åŒ¹é…ï¼Œid=123
- `/product/abc` âœ… åŒ¹é…ï¼Œid=abc
- `/product` âŒ ä¸åŒ¹é…ï¼ˆç¼ºå°‘ idï¼‰
- `/product/1/edit` âŒ ä¸åŒ¹é…ï¼ˆå¤šäº† /editï¼‰

---

### 2ï¸âƒ£ å•†å“åˆ—è¡¨é¡µï¼ˆè§¦å‘è·³è½¬ï¼‰

#### é¦–é¡µï¼šhome/index.vue

**æ¨¡æ¿éƒ¨åˆ†ï¼š**
```vue
<div
  class="product-item"
  v-for="product in homeData.hotProducts"
  :key="product.id"
  @click="goProductDetail(product.id)"
>
  <img :src="product.image" class="product-image" />
  <div class="product-name">{{ product.name }}</div>
  <div class="product-price">Â¥{{ product.price }}</div>
</div>
```

**è„šæœ¬éƒ¨åˆ†ï¼š**
```javascript
import { useRouter } from 'vue-router'

const router = useRouter()

// æ–¹æ³•1ï¼šä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²
const goProductDetail = (id) => {
  router.push(`/product/${id}`)
}

// æ–¹æ³•2ï¼šä½¿ç”¨å¯¹è±¡å½¢å¼ï¼ˆæ¨èï¼‰
const goProductDetail = (id) => {
  router.push({
    name: 'ProductDetail',
    params: { id: id }
  })
}
```

**å®é™…è¿è¡Œï¼š**
```javascript
// å‡è®¾å•†å“æ•°æ®
hotProducts = [
  { id: 1, name: 'iPhone 15', price: 5999 },
  { id: 2, name: 'MacBook Pro', price: 12999 },
  { id: 3, name: 'AirPods Pro', price: 1999 }
]

// ç”¨æˆ·ç‚¹å‡» iPhone 15
goProductDetail(1)  // è·³è½¬åˆ° /product/1

// ç”¨æˆ·ç‚¹å‡» MacBook Pro
goProductDetail(2)  // è·³è½¬åˆ° /product/2

// ç”¨æˆ·ç‚¹å‡» AirPods Pro
goProductDetail(3)  // è·³è½¬åˆ° /product/3
```

---

### 3ï¸âƒ£ å•†å“è¯¦æƒ…é¡µï¼ˆæ¥æ”¶å‚æ•°ï¼‰

#### è¯¦æƒ…é¡µï¼šproduct/detail.vue

```javascript
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'
import { getProductDetail } from '@/api/product'

const route = useRoute()
const product = ref({})

const loadProduct = async () => {
  // ğŸ”‘ å…³é”®ï¼šä» URL ä¸­è·å–å•†å“ ID
  const id = route.params.id
  
  console.log('å½“å‰å•†å“ID:', id)  // è°ƒè¯•è¾“å‡º
  
  // æ ¹æ® ID åŠ è½½å•†å“æ•°æ®
  const data = await getProductDetail(id)
  product.value = data
}

onMounted(() => {
  loadProduct()
})
```

**å®é™…è¿è¡Œï¼š**
```javascript
// URL: /product/1
route.params.id  // è¾“å‡º: "1"
// è°ƒç”¨ getProductDetail("1")
// åŠ è½½ iPhone 15 çš„æ•°æ®

// URL: /product/2
route.params.id  // è¾“å‡º: "2"
// è°ƒç”¨ getProductDetail("2")
// åŠ è½½ MacBook Pro çš„æ•°æ®
```

---

## ğŸ”„ å®Œæ•´æ•°æ®æµ

### åœºæ™¯ï¼šç”¨æˆ·ç‚¹å‡»"iPhone 15"

```javascript
// 1. é¦–é¡µæ•°æ®
const product = {
  id: 1,
  name: 'iPhone 15',
  price: 5999,
  image: 'https://example.com/iphone.jpg'
}

// 2. ç”¨æˆ·ç‚¹å‡»å•†å“
@click="goProductDetail(1)"

// 3. æ‰§è¡Œè·³è½¬
router.push('/product/1')

// 4. URL å˜åŒ–
// ä»: http://localhost:3000/home
// åˆ°: http://localhost:3000/product/1

// 5. Vue Router åŒ¹é…
// è·¯ç”±é…ç½®: /product/:id
// å®é™… URL: /product/1
// åŒ¹é…æˆåŠŸï¼params = { id: '1' }

// 6. æ¸²æŸ“è¯¦æƒ…é¡µç»„ä»¶
// detail.vue è¢«åŠ è½½

// 7. è¯¦æƒ…é¡µè·å–å‚æ•°
const id = route.params.id  // id = "1"

// 8. åŠ è½½æ•°æ®
await getProductDetail("1")

// 9. æ˜¾ç¤ºå•†å“è¯¦æƒ…
// é¡µé¢æ ‡é¢˜: å•†å“è¯¦æƒ…
// å•†å“åç§°: iPhone 15
// å•†å“ä»·æ ¼: Â¥5999
```

---

## ğŸ¨ å¯è§†åŒ–ç¤ºä¾‹

### é¦–é¡µå•†å“åˆ—è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        çƒ­é—¨æ¨è                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ [å›¾ç‰‡] â”‚  â”‚ [å›¾ç‰‡] â”‚         â”‚
â”‚  â”‚iPhone15â”‚  â”‚MacBook â”‚         â”‚
â”‚  â”‚ Â¥5999  â”‚  â”‚ Â¥12999 â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚   (id=1)      (id=2)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‚¹å‡» iPhone 15 å

```
URL: /product/1

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† å•†å“è¯¦æƒ…                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å•†å“è½®æ’­å›¾]                    â”‚
â”‚                                 â”‚
â”‚  Â¥5999  Â¥6999  8.5æŠ˜            â”‚
â”‚  iPhone 15 Pro Max              â”‚
â”‚  [çƒ­å–] [åŒ…é‚®]                   â”‚
â”‚  é”€é‡: 1000  åº“å­˜: 50           â”‚
â”‚                                 â”‚
â”‚  [é€‰æ‹©è§„æ ¼]                      â”‚
â”‚                                 â”‚
â”‚  å•†å“è¯¦æƒ…                        â”‚
â”‚  è¿™æ˜¯ä¸€æ¬¾å¾ˆæ£’çš„æ‰‹æœº...           â”‚
â”‚                                 â”‚
â”‚  [å®¢æœ] [è´­ç‰©è½¦] [åŠ å…¥è´­ç‰©è½¦]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª åŠ¨æ‰‹æµ‹è¯•

### æµ‹è¯• 1ï¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°

```javascript
// æ‰“å¼€é¦–é¡µï¼ŒæŒ‰ F12 æ‰“å¼€æ§åˆ¶å°

// è·å–å½“å‰è·¯ç”±ä¿¡æ¯
import { useRoute } from 'vue-router'
const route = useRoute()

// æŸ¥çœ‹å½“å‰è·¯å¾„
console.log(route.path)  // è¾“å‡º: /home

// ç‚¹å‡»å•†å“å
console.log(route.path)  // è¾“å‡º: /product/1
console.log(route.params)  // è¾“å‡º: { id: "1" }
console.log(route.params.id)  // è¾“å‡º: "1"
```

### æµ‹è¯• 2ï¼šæ·»åŠ è°ƒè¯•ä»£ç 

åœ¨ `detail.vue` ä¸­æ·»åŠ ï¼š

```javascript
const loadProduct = async () => {
  const id = route.params.id
  
  // ğŸ” è°ƒè¯•è¾“å‡º
  console.log('=== å•†å“è¯¦æƒ…é¡µè°ƒè¯• ===')
  console.log('å½“å‰ URL:', route.path)
  console.log('å•†å“ ID:', id)
  console.log('å®Œæ•´å‚æ•°:', route.params)
  console.log('==================')
  
  const data = await getProductDetail(id)
  product.value = data
}
```

### æµ‹è¯• 3ï¼šæ‰‹åŠ¨ä¿®æ”¹ URL

åœ¨æµè§ˆå™¨åœ°å€æ ç›´æ¥è¾“å…¥ï¼š
- `http://localhost:3000/product/1` â†’ æ˜¾ç¤ºå•†å“ 1
- `http://localhost:3000/product/999` â†’ æ˜¾ç¤ºå•†å“ 999
- `http://localhost:3000/product/abc` â†’ æ˜¾ç¤ºå•†å“ abcï¼ˆå¯èƒ½æŠ¥é”™ï¼‰

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ `route.params.id` æ˜¯å­—ç¬¦ä¸²è€Œä¸æ˜¯æ•°å­—ï¼Ÿ

```javascript
// URL: /product/123
console.log(route.params.id)  // "123" (å­—ç¬¦ä¸²)
console.log(typeof route.params.id)  // "string"

// å¦‚æœéœ€è¦æ•°å­—ï¼Œæ‰‹åŠ¨è½¬æ¢
const id = Number(route.params.id)  // 123 (æ•°å­—)
// æˆ–
const id = parseInt(route.params.id)  // 123 (æ•°å­—)
```

### Q2: å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°ï¼Ÿ

```javascript
// è·¯ç”±é…ç½®
{
  path: '/product/:categoryId/:productId',
  name: 'ProductDetail',
  component: () => import('@/views/product/detail.vue')
}

// è·³è½¬
router.push('/product/10/123')

// è·å–
const categoryId = route.params.categoryId  // "10"
const productId = route.params.productId    // "123"
```

### Q3: å¦‚ä½•ä¼ é€’æŸ¥è¯¢å‚æ•°ï¼Ÿ

```javascript
// è·³è½¬æ—¶å¸¦æŸ¥è¯¢å‚æ•°
router.push({
  path: '/product/123',
  query: { from: 'home', tab: 'reviews' }
})

// URL å˜æˆ: /product/123?from=home&tab=reviews

// è·å–
const from = route.query.from  // "home"
const tab = route.query.tab    // "reviews"
```

### Q4: å‚æ•°å˜åŒ–æ—¶ï¼Œé¡µé¢ä¸æ›´æ–°æ€ä¹ˆåŠï¼Ÿ

```javascript
// é—®é¢˜ï¼šä» /product/1 è·³è½¬åˆ° /product/2ï¼Œé¡µé¢ä¸åˆ·æ–°

// è§£å†³æ–¹æ¡ˆ1ï¼šç›‘å¬è·¯ç”±å˜åŒ–
import { watch } from 'vue'

watch(() => route.params.id, (newId) => {
  loadProduct(newId)
})

// è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨ key å¼ºåˆ¶åˆ·æ–°
<router-view :key="route.path" />
```

---

## ğŸ“ è¿›é˜¶æŠ€å·§

### 1. è·¯ç”±å‚æ•°éªŒè¯

```javascript
// è·¯ç”±é…ç½®
{
  path: '/product/:id(\\d+)',  // åªåŒ¹é…æ•°å­—
  name: 'ProductDetail',
  component: () => import('@/views/product/detail.vue')
}

// /product/123  âœ… åŒ¹é…
// /product/abc  âŒ ä¸åŒ¹é…
```

### 2. å¯é€‰å‚æ•°

```javascript
// è·¯ç”±é…ç½®
{
  path: '/product/:id/:tab?',  // tab æ˜¯å¯é€‰çš„
  name: 'ProductDetail',
  component: () => import('@/views/product/detail.vue')
}

// /product/123        âœ… åŒ¹é…ï¼Œtab = undefined
// /product/123/info   âœ… åŒ¹é…ï¼Œtab = "info"
```

### 3. ç¼–ç¨‹å¼å¯¼èˆªçš„å…¶ä»–æ–¹å¼

```javascript
// æ–¹å¼1ï¼šè·¯å¾„å­—ç¬¦ä¸²
router.push('/product/123')

// æ–¹å¼2ï¼šå¯¹è±¡å½¢å¼
router.push({ path: '/product/123' })

// æ–¹å¼3ï¼šå‘½åè·¯ç”±
router.push({ name: 'ProductDetail', params: { id: 123 } })

// æ–¹å¼4ï¼šå¸¦æŸ¥è¯¢å‚æ•°
router.push({ 
  name: 'ProductDetail', 
  params: { id: 123 },
  query: { from: 'home' }
})

// æ›¿æ¢å½“å‰å†å²è®°å½•ï¼ˆä¸èƒ½åé€€ï¼‰
router.replace('/product/123')

// åé€€
router.back()

// å‰è¿›
router.forward()

// è·³è½¬åˆ°æŒ‡å®šå†å²è®°å½•
router.go(-2)  // åé€€2æ­¥
```

---

## âœ… æ€»ç»“

### ä¸‰æ­¥å®ç°åŠ¨æ€è·¯ç”±

1. **é…ç½®è·¯ç”±**ï¼š`path: '/product/:id'`
2. **è§¦å‘è·³è½¬**ï¼š`router.push(\`/product/\${id}\`)`
3. **æ¥æ”¶å‚æ•°**ï¼š`route.params.id`

### å…³é”®æ¦‚å¿µ

- **åŠ¨æ€å‚æ•°**ï¼š`:id` å¯ä»¥åŒ¹é…ä»»ä½•å€¼
- **params**ï¼šè·¯å¾„å‚æ•°ï¼ˆ`/product/:id`ï¼‰
- **query**ï¼šæŸ¥è¯¢å‚æ•°ï¼ˆ`?key=value`ï¼‰
- **useRouter**ï¼šç”¨äºå¯¼èˆªè·³è½¬
- **useRoute**ï¼šç”¨äºè·å–è·¯ç”±ä¿¡æ¯

### ä½ çš„é¡¹ç›®ä¸­çš„åº”ç”¨

- é¦–é¡µå•†å“åˆ—è¡¨ â†’ ç‚¹å‡» â†’ å•†å“è¯¦æƒ…
- å•†å“åˆ—è¡¨é¡µ â†’ ç‚¹å‡» â†’ å•†å“è¯¦æƒ…
- éƒ½ä½¿ç”¨ç›¸åŒçš„ `goProductDetail(id)` æ–¹æ³•
- è¯¦æƒ…é¡µé€šè¿‡ `route.params.id` è·å–å•†å“ ID
- æ ¹æ® ID è°ƒç”¨ API åŠ è½½æ•°æ®

---

ç°åœ¨ï¼Œè¯•ç€å›ç­”è¿™äº›é—®é¢˜æ¥æ£€éªŒç†è§£ï¼š

1. å¦‚æœ URL æ˜¯ `/product/456`ï¼Œ`route.params.id` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
2. `router.push()` å’Œ `router.replace()` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
3. å¦‚ä½•ä»å•†å“è¯¦æƒ…é¡µè¿”å›åˆ°é¦–é¡µï¼Ÿ
4. å¦‚æœè¦ä¼ é€’å•†å“åˆ†ç±» IDï¼Œåº”è¯¥æ€ä¹ˆä¿®æ”¹è·¯ç”±é…ç½®ï¼Ÿ

ç­”æ¡ˆåœ¨æ–‡æ¡£ä¸­éƒ½èƒ½æ‰¾åˆ°ï¼ğŸ˜Š
